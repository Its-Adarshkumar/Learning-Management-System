<% layout('layouts/boilerplate') %>

<div class="d-flex">
  <!-- Sidebar -->

  <main class="main-content flex-grow-1">
    <div class="upload-header">
      <h2><i class="fa-solid fa-upload me-2"></i>Upload a New Video</h2>
      <p>Fill out the form below to add your lecture video to the LMS database.</p>
    </div>

    <form action="/upload-video" method="POST" class="upload-form" enctype="multipart/form-data">
      <div class="row g-4">
        <div class="col-md-6">
          <label for="topic">ğŸ“˜ Topic</label>
          <input type="text" id="topic" name="topic" class="form-control" placeholder="Enter topic name" />
        </div>

        <div class="col-md-6">
  <label for="courseSelect">ğŸ“ Course</label>
  <select id="courseSelect" name="course" class="form-select" required>
    <option value="" disabled selected>Select a course</option>

    <% if (courses && courses.length > 0) { %>
      <% courses.forEach(course => { %>
        <option value="<%= course %>"><%= course %></option>
      <% }) %>
    <% } else { %>
      <option disabled>No courses available yet</option>
    <% } %>

    <option value="new">â• New Course</option>
  </select>

  <!-- Hidden input (only shown when "New Course" selected) -->
  <input 
    type="text" 
    id="newCourseInput" 
    name="newCourse" 
    class="form-control mt-2 d-none" 
    placeholder="Enter new course name" 
  />
</div>


        <div class="form-divider"></div>

        <div class="col-12">
          <label for="description">ğŸ“ Description</label>
          <textarea id="description" name="description" rows="3" class="form-control" placeholder="Write a brief description about this topic..."></textarea>
        </div>

        <div class="col-12">
          <label for="summary">ğŸ§¾ Summary</label>
          <textarea id="summary" name="summary" rows="2" class="form-control" placeholder="Add a short summary (key points covered)..."></textarea>
        </div>

        <div class="form-divider"></div>

        <div class="col-12">
          <label for="video">ğŸ¥ Upload Video File</label>
          <input type="file" id="video" name="video" class="form-control" accept="video/*" />
        </div>

        <div class="col-12 text-center">
          <button type="submit" class="btn-upload"><i class="fa-solid fa-cloud-arrow-up me-2"></i> Upload Video</button>
        </div>
      </div>
    </form>
  </main>
</div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById("toggle-btn");
  const sidebar = document.getElementById("sidebar"); // âœ… note: using ID
  const main = document.querySelector(".main-wrapper");

  if (toggleBtn && sidebar && main) {
    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("active");
      main.classList.toggle("shifted");
    });
  } else {
    console.warn("Sidebar toggle not initialized â€” element(s) missing");
  }
});

    </script>